const express = require('express');
const cors = require('cors');
const app = express();
const PORT = process.env.PORT || 3000;

// à¹€à¸›à¸´à¸”à¹ƒà¸Šà¹‰ CORS à¹€à¸œà¸·à¹ˆà¸­à¹€à¸£à¸µà¸¢à¸ API à¸ˆà¸²à¸ frontend
app.use(cors());

// à¸–à¹‰à¸²à¸¡à¸µà¹„à¸Ÿà¸¥à¹Œ frontend à¸­à¸¢à¸¹à¹ˆà¹ƒà¸™à¹‚à¸Ÿà¸¥à¹€à¸”à¸­à¸£à¹Œ public à¹ƒà¸«à¹‰à¹€à¸‹à¸´à¸£à¹Œà¸Ÿà¹„à¸”à¹‰
app.use(express.static('public'));

// à¸£à¸²à¸¢à¸à¸²à¸£à¸‚à¸­à¸‡à¸‚à¸§à¸±à¸à¹ƒà¸«à¹‰à¸ªà¸¸à¹ˆà¸¡
const gifts = [
  "à¸«à¸¹à¸Ÿà¸±à¸‡à¹„à¸£à¹‰à¸ªà¸²à¸¢",
  "à¸ªà¸¡à¸¸à¸”à¹‚à¸™à¹‰à¸•à¸™à¹ˆà¸²à¸£à¸±à¸à¹†",
  "à¹à¸à¹‰à¸§à¸™à¹‰à¸³à¹€à¸à¹‡à¸šà¸­à¸¸à¸“à¸«à¸ à¸¹à¸¡à¸´",
  "à¸‚à¸™à¸¡à¸à¸¥à¹ˆà¸­à¸‡à¹€à¸¥à¹‡à¸",
  "à¸•à¸¸à¹Šà¸à¸•à¸²à¸™à¸¸à¹ˆà¸¡à¸Ÿà¸¹",
  "à¸•à¹‰à¸™à¹„à¸¡à¹‰à¹€à¸¥à¹‡à¸à¸›à¸£à¸°à¸”à¸±à¸šà¹‚à¸•à¹Šà¸°",
  "à¸ªà¸²à¸¢à¸Šà¸²à¸£à¹Œà¸ˆà¹€à¸£à¹‡à¸§",
  "à¸›à¸²à¸à¸à¸²à¸ªà¸µà¸ªà¸§à¸¢",
  "à¸žà¸§à¸‡à¸à¸¸à¸à¹à¸ˆà¸¥à¸²à¸¢à¸™à¹ˆà¸²à¸£à¸±à¸",
  "à¸‚à¸­à¸‡à¸‚à¸§à¸±à¸à¸¥à¸¶à¸à¸¥à¸±à¸š! ðŸŽ"
];

// API à¸ªà¸¸à¹ˆà¸¡à¸‚à¸­à¸‡à¸‚à¸§à¸±à¸
app.get('/api/gift', (req, res) => {
  const randomIndex = Math.floor(Math.random() * gifts.length);
  const randomGift = gifts[randomIndex];
  res.json({ gift: randomGift });
});

// à¹€à¸£à¸´à¹ˆà¸¡à¸£à¸±à¸™ server
app.listen(PORT, () => {
  console.log(`Server is running at http://localhost:${PORT}`);
});
